<!DOCTYPE html>
<html>
<head>
<title>tecnicasaccesodatos.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="ut4-utilizaci%C3%B3n-de-t%C3%A9cnicas-de-acceso-a-datos">UT4 UTILIZACIÓN DE TÉCNICAS DE ACCESO A DATOS</h1>
<h2 id="%C3%ADndice">Índice</h2>
<ul>
<li><a href="#ut4-utilizaci%C3%B3n-de-t%C3%A9cnicas-de-acceso-a-datos">UT4 UTILIZACIÓN DE TÉCNICAS DE ACCESO A DATOS</a>
<ul>
<li><a href="#%C3%ADndice">Índice</a></li>
<li><a href="#acceso-a-bases-de-datos-desde-php">Acceso a bases de datos desde PHP</a></li>
<li><a href="#mysql-mariadb">MySQL /MariaDB</a></li>
<li><a href="#mysqli">MySQLi</a></li>
<li><a href="#php-data-objectspdo">PHP Data Objects(PDO)</a>
<ul>
<li><a href="#pdo-establecimiento-de-conexiones">PDO: establecimiento de conexiones</a>
<ul>
<li><a href="#las-variables-figuren-en-un-archivo-env">Las variables figuren en un archivo .env</a></li>
</ul>
</li>
<li><a href="#pdo-ejecuci%C3%B3n-de-consultas">PDO: ejecución de consultas</a></li>
<li><a href="#pdo-transacciones">PDO: transacciones</a></li>
<li><a href="#pdo-obtenci%C3%B3n-y-utilizaci%C3%B3n-de-conjuntos-de-resultados">PDO: obtención y utilización de conjuntos de resultados</a></li>
<li><a href="#pdo-consultas-preparadas">PDO: consultas preparadas</a></li>
</ul>
</li>
<li><a href="#errores-y-manejo-de-excepciones">Errores y manejo de excepciones</a>
<ul>
<li><a href="#qu%C3%A9-es-un-error">¿Qué es un error?</a></li>
<li><a href="#qu%C3%A9-es-una-excepci%C3%B3n">¿Qué es una excepción?</a>
<ul>
<li><a href="#c%C3%B3mo-se-manejan-las-excepciones">¿Cómo se manejan las excepciones?</a>
<ul>
<li><a href="#try">try</a></li>
<li><a href="#catch">catch</a></li>
<li><a href="#finally">finally</a></li>
<li><a href="#throw">throw</a></li>
</ul>
</li>
<li><a href="#creando-nuestras-excepciones">Creando nuestras excepciones</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="acceso-a-bases-de-datos-desde-php">Acceso a bases de datos desde PHP</h2>
<p>PHP soporta más de 15 <strong>sistemas gestores de bases de datos</strong>: SQLite, Oracle, SQL Server, PostgreSQL, IBM DB2, MySQL, etc<br>
Hasta la versión 5 de PHP, el acceso a las bases de datos se hacía principalmente utilizando extensiones específicas para cada sistema gestor de base de datos (<strong>extensiones nativas</strong>).</p>
<p>A partir de la versión 5 de PHP se introdujo en el lenguaje una extensión para acceder de una forma común a distintos sistemas gestores: <strong>PDO</strong>.</p>
<p>La gran ventaja de PDO es que podemos seguir utilizando una misma sintaxis aunque cambiemos el motor de nuestra base de datos.</p>
<p>Mientras PDO ofrece un conjunto común de funciones, las extensiones nativas normalmente ofrecen más potencia (acceso a funciones específicas de cada gestor de base de datos) y en algunos casos también mayor velocidad.</p>
<h2 id="mysql-mariadb">MySQL /MariaDB</h2>
<p><strong>MySQL</strong> es un sistema de gestión de bases de datos relacional desarrollado bajo <strong>licencia dual</strong>: Licencia pública general/Licencia comercial por Oracle Corporation y está considerada como la base de datos de código abierto más popular del mundo,​​ y una de las más populares en general junto a Oracle y Microsoft SQL Server.</p>
<p><img src="file:///c:/Users/cic/Documents/Curso23-24/DWES/Apuntes/Tema4/img/mysql.png" alt="Logo de MySQL"></p>
<p><strong>MariaDB</strong> es un sistema de gestión de bases de datos derivado de MySQL con licencia GPL (General Public License). Es desarrollado por Michael (Monty) Widenius —fundador de MySQL—, la fundación MariaDB y la comunidad de desarrolladores de software libre.</p>
<p><img src="file:///c:/Users/cic/Documents/Curso23-24/DWES/Apuntes/Tema4/img/mariaDB.png" alt="Logo de MariaDB"></p>
<p>Ambas bases de datos incorporan múltiples motores de almacenamiento siendo alguno de ellos:</p>
<p><strong>MyISAM</strong> (<strong>Aria</strong> en MariaDB):. Muy rápido pero a cambio no contempla integridad referencial ni tablas transaccionales.</p>
<p><strong>InnoDB</strong> (<strong>XtraDB</strong> en MariaDB):  motor que se utiliza por defecto, es un poco más lento pero sí soporta tanto integridad referencial como tablas transaccionales.</p>
<h2 id="mysqli">MySQLi</h2>
<p>Esta extensión se desarrolló para aprovechar las ventajas que ofrecen las versiones 4.1.3 y posteriores de MySQL, y viene incluida con PHP a partir de la versión 5.</p>
<p>Ofrece un interface de programación dual, pudiendo accederse utilizando objetos o funciones.<br>
Por ejemplo, para establecer una conexión con un servidor MySQL y consultar su versión, podemos utilizar cualquiera de las siguientes formas:</p>
<ul>
<li>Utilizando objetos</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment">//utilizando constructores y métodos de la programación orientada a objetos</span>
$conexion = <span class="hljs-keyword">new</span> mysqli(<span class="hljs-string">'localhost'</span>, <span class="hljs-string">'usuario'</span>, <span class="hljs-string">'contraseña'</span>, <span class="hljs-string">'base_de_datos'</span>);
<span class="hljs-keyword">print</span> $conexion‐&gt;server_info;
</div></code></pre>
<ul>
<li>Utilizando funciones</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment">// utilizando llamadas a funciones </span>
$conexion = mysqli_connect(<span class="hljs-string">'localhost'</span>, <span class="hljs-string">'usuario'</span>, <span class="hljs-string">'contraseña'</span>, <span class="hljs-string">'base_de_datos'</span>);
<span class="hljs-keyword">print</span> mysqli_get_server_info($conexion);
</div></code></pre>
<h2 id="php-data-objectspdo">PHP Data Objects(PDO)</h2>
<p>PDO se basa en las características de orientación a objetos de PHP pero, al contrario que la extensión MySQLi, no ofrece un interface de programación dual.</p>
<p>Para acceder a las funcionalidades de la extensión hay que emplear los objetos que ofrece, con sus métodos y propiedades. No existen funciones alternativas.</p>
<h3 id="pdo-establecimiento-de-conexiones">PDO: establecimiento de conexiones</h3>
<p>Para establecer una conexión con una base de datos utilizando PDO hay que instanciar un objeto de la clase PDO pasándole los siguientes parámetros (solo el primero es obligatorio):</p>
<ul>
<li>Origen de datos (DSN). Es una cadena de texto que indica qué controlador se va a utilizar y a continuación, separadas por el carácter dos puntos, los parámetros específicos necesarios por el controlador, como por ejemplo el nombre o dirección IP del servidor y el nombre de la base de datos.</li>
<li>Nombre de usuario con permisos para establecer la conexión.</li>
<li>Contraseña del usuario.</li>
<li>Opciones de conexión, almacenadas en forma de array.</li>
</ul>
<pre class="hljs"><code><div>$dwes = <span class="hljs-keyword">new</span> PDO(<span class="hljs-string">'mysql:host=localhost;dbname=dwes'</span>, <span class="hljs-string">'dwes'</span>, <span class="hljs-string">'abc123.'</span>);
</div></code></pre>
<p>Si se utiliza <strong>el controlador para MySQL</strong>, los parámetros específicos para utilizar en la cadena DSN (separadas unas de otras por el carácter punto y coma) a continuación del prefijo mysql: son los siguientes:</p>
<ul>
<li><strong>host</strong>: nombre o dirección IP del servidor.</li>
<li><strong>port</strong>: número de puerto TCP en el que escucha el servidor.</li>
<li><strong>dbname</strong>: nombre de la base de datos.</li>
<li><strong>unix_socket</strong>: socket de MySQL en sistemas Linux.</li>
</ul>
<p>Para indicar que utilice codificación UTF-8 para los datos que se transmitan:</p>
<pre class="hljs"><code><div>$opciones = <span class="hljs-keyword">array</span>(PDO::MYSQL_ATTR_INIT_COMMAND =&gt; <span class="hljs-string">"SET NAMES utf8"</span>); 
$dwes = <span class="hljs-keyword">new</span> PDO(<span class="hljs-string">'mysql:host=localhost;dbname=dwes'</span>, <span class="hljs-string">'dwes'</span>, <span class="hljs-string">'abc123.'</span>, $opciones);
</div></code></pre>
<p>Ejemplo de conexión controlando las excepciones:</p>
<pre class="hljs"><code><div> <span class="hljs-keyword">try</span>{
     $connection= <span class="hljs-keyword">new</span> PDO(
        dsn: <span class="hljs-string">'mysql:host=localhost;dbname=dwes;charset=utf8mb4'</span>,
        username: <span class="hljs-string">'dwes'</span>,
        password:<span class="hljs-string">'abc123.'</span>,
     )
     <span class="hljs-keyword">echo</span> <span class="hljs-string">'Conexión establecida correctamente'</span>;
 }<span class="hljs-keyword">catch</span> (PDOException $e){
    <span class="hljs-keyword">echo</span> match($e-&gt;getCode()){
        <span class="hljs-number">1049</span> =&gt; <span class="hljs-string">'Base de datos no encontrada'</span>,
        <span class="hljs-number">1045</span> =&gt; <span class="hljs-string">'Acceso denegado'</span>,
        <span class="hljs-number">2002</span> =&gt; <span class="hljs-string">'Conexión rechazada'</span>,
        <span class="hljs-keyword">default</span> =&gt; <span class="hljs-string">'Error desconocido'</span>,
    };
}
</div></code></pre>
<h4 id="las-variables-figuren-en-un-archivo-env">Las variables figuren en un archivo .env</h4>
<p>A través de la librería externa <a href="https://github.com/vlucas/phpdotenv">phpdotenv</a> que nos permite definir un fichero <code>.env</code> para tener todas las variables de entorno definidas.</p>
<p>Un ejemplo del archivo <strong>.env</strong></p>
<pre class="hljs"><code><div>
DB_DSN=mysql:host=localhost:3306;dbname=prueba;charset=utf8mb4
DB_USERNAME=root
DB_PASSWORD=
</div></code></pre>
<p>Un ejemplo de la clase de conexión</p>
<pre class="hljs"><code><div><span class="hljs-keyword">require_once</span> <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/vendor/autoload.php'</span>;

$dotenv = \Dotenv\Dotenv::createImmutable(<span class="hljs-keyword">__DIR__</span>);
$dotenv-&gt;load();

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConnectionPDODotenv</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ?PDO $connection = <span class="hljs-keyword">null</span>;

    <span class="hljs-keyword">final</span> <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span> </span>{}

    <span class="hljs-keyword">final</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getConnection</span><span class="hljs-params">()</span>: ?<span class="hljs-title">PDO</span>
    </span>{
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">self</span>::$connection) {
                <span class="hljs-keyword">self</span>::$connection = <span class="hljs-keyword">new</span> PDO(
                    dsn: $_ENV[<span class="hljs-string">'DB_DSN'</span>],
                    username: $_ENV[<span class="hljs-string">'DB_USERNAME'</span>],
                    password: $_ENV[<span class="hljs-string">'DB_PASSWORD'</span>],
                );
            }
        } <span class="hljs-keyword">catch</span> (PDOException $e) {
            <span class="hljs-keyword">echo</span> match ($e-&gt;getCode()) {
                <span class="hljs-number">1049</span> =&gt; <span class="hljs-string">'Base de datos no encontrada'</span>,
                <span class="hljs-number">1045</span> =&gt; <span class="hljs-string">'Acceso denegado'</span>,
                <span class="hljs-number">2002</span> =&gt; <span class="hljs-string">'Conexión rechazada'</span>,
                <span class="hljs-keyword">default</span> =&gt; <span class="hljs-string">'Error desconocido'</span>,
            };
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::$connection;
    }
     <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__clone</span><span class="hljs-params">()</span> </span>{}
}

$connection = ConnectionPDODotenv::getConnection();

<span class="hljs-keyword">if</span> ($connection <span class="hljs-keyword">instanceof</span> PDO)
{
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'Conexión establecida correctamente'</span>;
}

</div></code></pre>
<p><img class="emoji" alt="computer" src="data:image/png;base64,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" /> Hoja04_BBDD_01 (Ej 1,2,3,4)</p>
<h3 id="pdo-ejecuci%C3%B3n-de-consultas">PDO: ejecución de consultas</h3>
<p>Hay que diferenciar entre las sentencias SQL que no devuelven datos, de aquellas que sí lo devuelven.</p>
<p>En el caso de las consultas de acción, como INSERT, DELETE o UPDATE, el <strong>método exec</strong> devuelve el número de registros afectados.</p>
<pre class="hljs"><code><div>$registros=$dwes-&gt;exec(<span class="hljs-string">'DELETE FROM stock WHERE unidades=0'</span>);
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;p&gt;Se han borrado $registros registros.&lt;/p&gt;"</span>;
</div></code></pre>
<p>Si la consulta genera un conjunto de datos (SELECT) hay que utilizar el <strong>método query</strong>, que devuelve un objeto de la clase <strong>PDOStatement</strong>.</p>
<pre class="hljs"><code><div>$dwes = <span class="hljs-keyword">new</span> PDO(<span class="hljs-string">"mysql:host=localhost;dbname=dwes"</span>, <span class="hljs-string">"dwes"</span>, <span class="hljs-string">"abc123."</span>); 
$resultado = $dwes‐&gt;query(<span class="hljs-string">"SELECT producto, unidades FROM stock"</span>); 
</div></code></pre>
<h3 id="pdo-transacciones">PDO: transacciones</h3>
<p>Por defecto PDO trabaja en modo &quot;autocommit&quot;, es decir, que confirma de forma automática cada sentencia que ejecuta el servidor. Para trabajar con transacciones, PDO incorpora tres métodos:</p>
<ul>
<li><strong>beginTransaction</strong>: deshabilita el modo &quot;autocommit&quot; y comienza una nueva transacción, que finalizará cuando se ejecute uno de los dos métodos siguientes.</li>
<li><strong>commit</strong>: confirma la transacción actual.</li>
<li><strong>rollback</strong>: revierte los cambios llevados a cabo en la transacción actual.<br>
Una vez ejecutado un commit o un rollback, se volverá al modo de confirmación automática.</li>
</ul>
<pre class="hljs"><code><div>$ok = <span class="hljs-keyword">true</span>; 
$dwes-&gt;beginTransaction(); 
<span class="hljs-keyword">if</span>($dwes-&gt;exec(<span class="hljs-string">'DELETE …'</span>) == <span class="hljs-number">0</span>)  $ok = <span class="hljs-keyword">false</span>; 
<span class="hljs-keyword">if</span>($dwes-&gt;exec(<span class="hljs-string">'UPDATE …'</span>) == <span class="hljs-number">0</span>)  $ok = <span class="hljs-keyword">false</span>; 
… 
<span class="hljs-keyword">if</span> ($ok) $dwes-&gt;commit();  <span class="hljs-comment">// Si todo fue bien confirma los cambios </span>
<span class="hljs-keyword">else</span> $dwes-&gt;rollback(); <span class="hljs-comment">// y si no, los revierte</span>
</div></code></pre>
<h3 id="pdo-obtenci%C3%B3n-y-utilizaci%C3%B3n-de-conjuntos-de-resultados">PDO: obtención y utilización de conjuntos de resultados</h3>
<p>Al igual que en MySQLi, en PDO hay varias posibilidades para tratar con el conjunto de resultados devueltos por el método query. La más utilizada es el <strong>método fetch</strong>:</p>
<pre class="hljs"><code><div>$resultado = $dwes-&gt;query(<span class="hljs-string">'SELECT campo1, campo2 FROM tabla WHERE condicion'</span>);
<span class="hljs-keyword">while</span> ($registro = $resultado-&gt;fetch()) 
{
<span class="hljs-keyword">echo</span> $registro[<span class="hljs-string">'campo1'</span>].<span class="hljs-string">": "</span>.$registro[<span class="hljs-string">'campo2'</span>].<span class="hljs-string">"&lt;br /&gt;"</span>;
} 
</div></code></pre>
<p>Por defecto, el <strong>método fetch</strong> genera y devuelve, a partir de cada registro, un array con claves numéricas y asociativas. Para cambiar su comportamiento, admite un parámetro opcional que puede tomar uno de los siguientes valores:</p>
<ul>
<li><strong>PDO::FETCH_ASSOC</strong>: devuelve solo un array asociativo.</li>
<li><strong>PDO::FETCH_NUM</strong>: devuelve solo un array con claves numéricas.</li>
<li><strong>PDO::FETCH_BOTH</strong>: devuelve un array con claves numéricas y asociativas. Es el comportamiento por defecto.</li>
<li><strong>PDO::FETCH_OBJ</strong>: devuelve un objeto cuyas propiedades se corresponden con los campos del registro.</li>
</ul>
<pre class="hljs"><code><div>$resultado = $dwes-&gt;query(<span class="hljs-string">'SELECT campo1, campo2 FROM tabla WHERE condicion'</span>);
<span class="hljs-keyword">while</span> ($registro = $resultado-&gt;fetch(PDO::FETCH_OBJ)) 
{
	<span class="hljs-keyword">echo</span> $registro-&gt;campo1.<span class="hljs-string">": "</span>.$registro-&gt;campo2.<span class="hljs-string">"&lt;br /&gt;"</span>;
} 
</div></code></pre>
<ul>
<li><strong>PDO::FETCH_LAZY</strong>: devuelve tanto el objeto como el array con clave dual anterior.</li>
<li><strong>PDO::FETCH_BOUND</strong>: devuelve true y asigna los valores del registro a variables, según se indique con el método bindColumn. Este método debe ser llamado una vez por cada columna, indicando en cada llamada el número de columna (empezando en 1) y la variable a asignar.</li>
</ul>
<pre class="hljs"><code><div>$resultado = $dwes-&gt;query(<span class="hljs-string">'SELECT campo1, campo2 FROM tabla WHERE condicion'</span>);
$resultado-&gt;bindColumn(<span class="hljs-number">1</span>, $campo1);
$resultado-&gt;bindColumn(<span class="hljs-number">2</span>, $campo2);
<span class="hljs-keyword">while</span> ($registro = $resultado-&gt;fetch(PDO::FETCH_BOUND)) 
{
	<span class="hljs-keyword">echo</span> $campo1.<span class="hljs-string">": "</span>.$campo2.<span class="hljs-string">"&lt;br /&gt;"</span>;
} 
</div></code></pre>
<p><img class="emoji" alt="computer" src="data:image/png;base64,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" /> Hoja04_BBDD_01(Ej 5,6,7 y 8)</p>
<h3 id="pdo-consultas-preparadas">PDO: consultas preparadas</h3>
<p>Para preparar la consulta se utiliza el <strong>método prepare</strong> de la clase PDO. Este método devuelve un objeto de la clase <strong>PDOStatement</strong>. Los parámetros se pueden marcar utilizando signos de interrogación.</p>
<pre class="hljs"><code><div>$consulta=$dwes-&gt;prepare(<span class="hljs-string">'INSERT INTO tabla (campo1, campo2) VALUES (?, ?)'</span>);
</div></code></pre>
<p>O también se pueden utilizar parámetros con nombre, precediéndolos por el símbolo de dos puntos:</p>
<pre class="hljs"><code><div>$consulta=$dwes-&gt;prepare(<span class="hljs-string">'INSERT INTO tabla (campo1, campo2) VALUES (:cm1, :cm2)’);
</span></div></code></pre>
<p>Si se utiliza parámetros con nombre hay que indicar ese nombre en la llamada a <strong>bindParam</strong></p>
<pre class="hljs"><code><div>$campo1 = <span class="hljs-string">"valor_campo1"</span>;
$campo2 = <span class="hljs-string">"valor_campo2"</span>;
$consulta-&gt;bindParam(<span class="hljs-number">1</span>, $campo1); <span class="hljs-comment">//o $consulta-&gt;bindParam(:cm1, $campo1);</span>
$consulta-&gt;bindParam(<span class="hljs-number">2</span>, $campo2); <span class="hljs-comment">//o $consulta-&gt;bindParam(:cm2, $campo2);</span>
</div></code></pre>
<p>Una vez preparada la consulta y enlazados los parámetros con sus valores, se ejecuta la consulta utilizando el <strong>método execute</strong>.</p>
<pre class="hljs"><code><div>$consulta-&gt;execute();
</div></code></pre>
<p><img class="emoji" alt="computer" src="data:image/png;base64,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" /> Hoja04_BBDD_01(Ej 9)</p>
<h2 id="errores-y-manejo-de-excepciones">Errores y manejo de excepciones</h2>
<h3 id="%C2%BFqu%C3%A9-es-un-error">¿Qué es un error?</h3>
<p>Un error es un problema que ocurre en tiempo de ejecución y que interrumpe el flujo normal de ejecución del programa.</p>
<h3 id="%C2%BFqu%C3%A9-es-una-excepci%C3%B3n">¿Qué es una excepción?</h3>
<p>A partir de la versión 5 se introdujo en PHP un modelo de excepciones similar al existente en otros lenguajes de programación.<br>
Una excepción es un error que ocurre en tiempo de ejecución y que interrumpe el flujo normal de ejecución del programa. Las excepciones son objetos que representan errores. Cuando ocurre un error, el intérprete de PHP crea un objeto de la <strong>clase Exception</strong> o de una <strong>clase derivada de Exception</strong> y lo lanza. El código que llama a la función que generó el error puede capturar la excepción y manejarla de forma adecuada.</p>
<h4 id="%C2%BFc%C3%B3mo-se-manejan-las-excepciones">¿Cómo se manejan las excepciones?</h4>
<p>Las excepciones se manejan con la sentencia try/catch. La sentencia try/catch permite definir un bloque de código que se va a intentar ejecutar y un bloque de código que se va a ejecutar si se produce una excepción. La sentencia try/catch se puede usar para capturar excepciones lanzadas por cualquier código PHP, incluyendo código de terceros.</p>
<ul>
<li>El código susceptible de producir algún error se introduce en un bloque <strong>try</strong>.</li>
<li>Cuando se produce algún error, se lanza una excepción utilizando la instrucción <strong>throw</strong>.</li>
<li>Después del bloque try debe haber como mínimo un bloque <strong>catch</strong> encargado de procesar el error.</li>
<li>Si una vez acabado el bloque try no se ha lanzado ninguna excepción, se continúa con la ejecución en la línea siguiente al bloque o bloques catch.</li>
</ul>
<h5 id="try">try</h5>
<p>La sentencia try define un bloque de código que se va a intentar ejecutar. Si se produce una excepción, el código que sigue a la sentencia try no se ejecuta y el intérprete PHP busca una sentencia catch que pueda manejar la excepción.</p>
<h5 id="catch">catch</h5>
<p>La sentencia catch define un bloque de código que se va a ejecutar si se produce una excepción. La sentencia catch debe especificar el tipo de excepción que se va a manejar. Si se produce una excepción que no es del tipo especificado, la sentencia catch no se ejecuta y la excepción se propaga al siguiente bloque catch más externo.</p>
<h5 id="finally">finally</h5>
<p>La sentencia finally define un bloque de código que se va a ejecutar siempre, independientemente de si se produce una excepción o no. La sentencia finally se ejecuta después de que se ejecuta el bloque try y después de que se ejecuta el bloque catch.</p>
<h5 id="throw">throw</h5>
<p>La sentencia throw permite lanzar una excepción. La sentencia throw debe especificar el tipo de excepción que se va a lanzar. Si se lanza una excepción que no es del tipo especificado, la excepción se propaga al siguiente bloque catch más externo.</p>
<p>Por ejemplo, para lanzar una excepción cuando se produce una división por cero podrías hacer:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">divide</span><span class="hljs-params">($dividendo, $divisor)</span>: <span class="hljs-title">int</span>|<span class="hljs-title">float</span>
</span>{
    <span class="hljs-keyword">if</span> ($divisor === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">Exception</span>(<span class="hljs-string">'No se puede dividir por cero'</span>);
    }

    <span class="hljs-keyword">if</span> (!is_int($dividendo) || !is_int($divisor)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidArgumentException(<span class="hljs-string">'Los argumentos deben ser números enteros'</span>);
    }

    <span class="hljs-keyword">return</span> $dividendo / $divisor;
}

<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">echo</span> divide(<span class="hljs-number">100</span>, <span class="hljs-number">0.5</span>);
} <span class="hljs-keyword">catch</span> (InvalidArgumentException $exception) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'InvalidArgumentException: '</span> . $exception-&gt;getMessage();
} <span class="hljs-keyword">catch</span> (<span class="hljs-keyword">Exception</span> $exception) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'Exception: '</span> . $exception-&gt;getMessage();
}

</div></code></pre>
<h4 id="creando-nuestras-excepciones">Creando nuestras excepciones</h4>
<p>Ejemplo:</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InvalidProductException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Exception</span> </span>{} <span class="hljs-comment">// creo una nueva excepcion InvalidProductExcepcion</span>

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cart</span> </span>{   
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">array</span> $items = [];

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getItems</span><span class="hljs-params">()</span>: <span class="hljs-title">array</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;items;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addProduct</span><span class="hljs-params">(array $product)</span>: <span class="hljs-title">void</span> </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">isset</span>($product[<span class="hljs-string">'name'</span>]) || !<span class="hljs-keyword">isset</span>($product[<span class="hljs-string">'price'</span>])) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidProductException(<span class="hljs-string">'El producto no es válido'</span>);
        }

        <span class="hljs-keyword">$this</span>-&gt;items[] = $product;
    }
}

$cart = <span class="hljs-keyword">new</span> Cart;

<span class="hljs-keyword">try</span> {
    $cart-&gt;addProduct([
        <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'Producto 1'</span>,
        <span class="hljs-string">'precio'</span> =&gt; <span class="hljs-number">10</span>,
    ]);
    var_dump($cart-&gt;getItems());
} <span class="hljs-keyword">catch</span> (InvalidProductException $ex) {
    <span class="hljs-keyword">echo</span> $exc-&gt;getMessage();
}
</div></code></pre>
<p>En este ejemplo saldrá por la excepción debido a que el nombre es price  y por equivocación ha puesto precio.</p>
<p>PHP define una <strong>clasificación de los errores</strong> que se pueden producir en la ejecución de un programa y ofrece métodos para ajustar el tratamiento de los mismos. Para hacer referencia a cada uno de los niveles de error, PHP define una serie de <strong>constantes</strong>.</p>
<p>Cada nivel se identifica por una constante. Por ejemplo, la constante <code>E_NOTICE</code> hace referencia a avisos que pueden indicar un error al ejecutar el script, y la constante <code>E_ERROR</code> engloba errores fatales que provocan que se interrumpa forzosamente la ejecución.</p>
<p>La configuración inicial de cómo se va a tratar cada error según su nivel se realiza en <code>php.ini</code> el fichero de configuración de PHP.</p>
<p>Entre los principales parámetros que puedes ajustar están:</p>
<ul>
<li><strong>error_reporting</strong>: indica qué tipos de errores se notificarán. Su valor se forma utilizando los operadores a nivel de bit para combinar las constantes anteriores. Su valor predeterminado es E_ALL &amp; ~E_NOTICE que indica que se notifiquen todos los errores (E_ALL) salvo los avisos en tiempo de ejecución (E_NOTICE).</li>
<li><strong>display_errors</strong>: en su valor por defecto (On), hace que los mensajes se envíen a la salida estándar (y por lo tanto se muestren en el navegador). Se debe desactivar (Off) en los servidores que no se usan para desarrollo sino para producción.</li>
</ul>
<p>Desde código se puede usar la función <strong>error_reporting</strong> con las constantes anteriores para establecer el nivel de notificación en un momento determinado.</p>
<p>Por ejemplo, en un entorno de desarrollo normalmente interesa que tengamos información de todos los errores  e incluso crear un fichero con los errores detectados:</p>
<pre class="hljs"><code><div>error_reporting(E_ALL | E_STRICT); <span class="hljs-comment">// recoge todos los errores</span>
ini_set(<span class="hljs-string">'display_errors'</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// es como si cambiase este paramétros en el fichero de configuración de php, activando que los mensajes se envién por la salida estándar</span>
ini_set(<span class="hljs-string">'log_errors'</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// activo que se guarden los errores en un fichero de log</span>
ini_set(<span class="hljs-string">'error_log'</span>, <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/logs/php_errors.log'</span>); <span class="hljs-comment">// indico la ruta en donde guardar los errores.</span>

</div></code></pre>
<p>La clase PDO permite definir la fórmula que usará cuando se produzca un error, utilizando el atributo PDO::ATTR_ERRMODE. Las posibilidades son:</p>
<ul>
<li><strong>PDO::ERRMODE_SILENT</strong>: no se hace nada cuando ocurre un error. Es el comportamiento por defecto.</li>
<li><strong>PDO::ERRMODE_WARNING</strong>: genera un error de tipo <code>E_WARNING</code> cuando se produce un error.</li>
<li><strong>PDO::ERRMODE_EXCEPTION</strong>: cuando se produce un error lanza una excepción utilizando el manejador propio<strong>PDOException</strong>.</li>
</ul>
<p>Es decir, que si quieres utilizar excepciones con la extensión PDO, debes configurar la conexión haciendo:</p>
<pre class="hljs"><code><div>$dwes-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
</div></code></pre>
<p>Por ejemplo, el siguiente código captura la excepción que lanza PDO debido a que la tabla no existe:</p>
<pre class="hljs"><code><div>$dwes = <span class="hljs-keyword">new</span> PDO(<span class="hljs-string">"mysql:host=localhost; dbname=dwes"</span>, <span class="hljs-string">"dwes"</span>, <span class="hljs-string">"abc123."</span>); 
$dwes-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
<span class="hljs-keyword">try</span> { 
	$sql = <span class="hljs-string">"SELECT * FROM tablaincorrecta"</span>; 
	$result = $dwes-&gt;query($sql); 
	… 
} 
<span class="hljs-keyword">catch</span> (PDOException $p) { 
	<span class="hljs-keyword">echo</span> <span class="hljs-string">"Error "</span>.$p-&gt;getMessage().<span class="hljs-string">"&lt;br /&gt;"</span>; 
}
</div></code></pre>
<p><img class="emoji" alt="computer" src="data:image/png;base64,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" /> Hoja04_BBDD_02</p>
<p><img class="emoji" alt="computer" src="data:image/png;base64,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" /> Hoja04_BBDD_03</p>
<p><img class="emoji" alt="computer" src="data:image/png;base64,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" /> Hoja04_BBDD_04</p>
<p><img class="emoji" alt="computer" src="data:image/png;base64,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" /> Hoja04_BBDD_05</p>
<p><img class="emoji" alt="computer" src="data:image/png;base64,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" /> Hoja04_BBDD_06</p>

</body>
</html>
